â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘         MODUL RIWAYAT PEMINJAMAN BUKU - QUICK REFERENCE GUIDE            â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ¯ WHAT IS THIS MODULE?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A complete borrowing history system for students in a digital library.

Students can:
  âœ“ View all books they've borrowed
  âœ“ See borrowing dates & deadlines
  âœ“ Check return status (Borrowed/Returned/Overdue)
  âœ“ View cover images
  âœ“ See statistics
  âœ“ Export history to CSV


ğŸš€ QUICK START (5 MINUTES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. INSERT SAMPLE DATA
   â”‚
   â”œâ”€ phpMyAdmin Method:
   â”‚  â€¢ Open http://localhost/phpmyadmin
   â”‚  â€¢ Select perpustakaan_online
   â”‚  â€¢ Go to SQL tab
   â”‚  â€¢ Copy from: sql/migrations/sample-borrowing-history.sql
   â”‚  â€¢ Click Execute
   â”‚
   â””â”€ Command Line Method:
      mysql -u root perpustakaan_online < sql/migrations/sample-borrowing-history.sql

2. TEST THE MODULE
   â”‚
   â”œâ”€ Browser Method:
   â”‚  â€¢ Login: http://localhost/perpustakaan-online/public/login.php
   â”‚  â€¢ Visit: http://localhost/perpustakaan-online/public/student-borrowing-history.php
   â”‚  â€¢ See your borrowing history!
   â”‚
   â””â”€ Test Script Method:
      php test-borrowing-history.php

3. VERIFY IT WORKS
   â”‚
   â”œâ”€ You should see:
   â”‚  âœ“ Navbar with menu
   â”‚  âœ“ 4 stat cards
   â”‚  âœ“ Table with book data
   â”‚  âœ“ No errors
   â”‚
   â””â”€ Run security check:
      php security-audit.php


ğŸ“‚ FILES CREATED (QUICK REFERENCE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MAIN FILES (Must Have):
  ğŸ“„ public/student-borrowing-history.php
  ğŸ“„ public/api/borrowing-history.php
  ğŸ“„ src/BorrowingHistoryModel.php
  ğŸ“„ public/partials/borrowing-widget.php

SUPPORTING FILES:
  ğŸ“„ sql/migrations/sample-borrowing-history.sql
  ğŸ“„ test-borrowing-history.php
  ğŸ“„ security-audit.php

DOCUMENTATION (Read These):
  ğŸ“„ BORROWING_HISTORY_README.md          â† START HERE (5 min)
  ğŸ“„ BORROWING_HISTORY_GUIDE.md           â† Complete reference
  ğŸ“„ BORROWING_HISTORY_INTEGRATION.php    â† Integration examples
  ğŸ“„ BORROWING_HISTORY_ARCHITECTURE.txt   â† System design


ğŸ”— QUICK LINKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ACCESS POINTS:

From Student Dashboard:
  â€¢ Menu â†’ Riwayat Peminjaman
  â€¢ Or direct: /public/student-borrowing-history.php

API Endpoint:
  â€¢ /public/api/borrowing-history.php
  â€¢ /public/api/borrowing-history.php?status=borrowed
  â€¢ /public/api/borrowing-history.php?format=csv

Widget:
  â€¢ Include in dashboard: /public/partials/borrowing-widget.php


ğŸ’¾ DATABASE QUICK REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TABLE: BORROWS (Data Peminjaman)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id          â”‚ member_id â”‚ book_id â”‚ borrowed_at    â”‚
â”‚ due_at      â”‚ returned_atâ”‚ status  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status Values: 'borrowed', 'returned', 'overdue'

Sample Query:
  SELECT * FROM borrows WHERE member_id = 3;


TABLE: BOOKS (Data Buku)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  â”‚ title      â”‚ author    â”‚ cover_image        â”‚
â”‚ isbnâ”‚ category   â”‚ copies    â”‚ created_at         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sample Query:
  SELECT * FROM books WHERE id IN (10, 18, 19);


TABLE: MEMBERS (Data Siswa)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  â”‚ name       â”‚ email     â”‚ member_no          â”‚
â”‚ nisnâ”‚ status     â”‚ created_atâ”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ¨ UI COMPONENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HEADER/NAVBAR:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“š Perpustakaan Digital  â”‚ Dashboard â”‚ Katalog   â”‚
  â”‚                          â”‚ Riwayat   â”‚ Logout    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STATISTICS CARDS (4 Cards):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Total    â”‚  â”‚  Dipinjam  â”‚  â”‚ Dikembalikanâ”‚ â”‚   Telat    â”‚
  â”‚     5      â”‚  â”‚     2      â”‚  â”‚      2     â”‚  â”‚     1      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Cover    â”‚ Judul        â”‚ Tanggal Pj  â”‚ Tenggat    â”‚ Status     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ [IMG]    â”‚ Stoicism     â”‚ 19 Jan 2026 â”‚ 20 Jan 26  â”‚ Dipinjam   â”‚
  â”‚ [IMG]    â”‚ Psychology   â”‚ 15 Jan 2026 â”‚ 25 Jan 26  â”‚ Dikembalikan
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ”‘ KEY FEATURES & METHODS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BorrowingHistoryModel Class:

METHOD: getBorrowingHistory($memberId, $filters = [])
  Returns: Array of borrowing records with book details
  Usage:   $history = $model->getBorrowingHistory(3);

METHOD: getBorrowingStats($memberId)
  Returns: Array with total, borrowed, returned, overdue counts
  Usage:   $stats = $model->getBorrowingStats(3);

METHOD: getCurrentBorrows($memberId)
  Returns: Array of currently borrowed books with urgency
  Usage:   $current = $model->getCurrentBorrows(3);

METHOD: calculateTotalFine($memberId, $finePerDay = 5000)
  Returns: Float total fine amount
  Usage:   $fine = $model->calculateTotalFine(3, 5000);

STATIC: formatDate($date, $format = 'd M Y H:i')
  Returns: Formatted date string
  Usage:   echo BorrowingHistoryModel::formatDate($date);

STATIC: getStatusText($status)
  Returns: Status in Indonesian
  Usage:   echo BorrowingHistoryModel::getStatusText('borrowed');


ğŸ§‘â€ğŸ’» CODE SNIPPETS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GET RIWAYAT:
  require_once 'src/db.php';
  require_once 'src/BorrowingHistoryModel.php';
  
  $model = new BorrowingHistoryModel($pdo);
  $history = $model->getBorrowingHistory($_SESSION['user']['id']);
  
  foreach ($history as $borrow) {
      echo $borrow['book_title'];
  }

GET STATISTIK:
  $stats = $model->getBorrowingStats($_SESSION['user']['id']);
  echo "Total: " . $stats['total'];
  echo "Dipinjam: " . $stats['borrowed'];

USE API (JavaScript):
  fetch('/api/borrowing-history.php')
      .then(r => r.json())
      .then(data => {
          console.log(data.total);
          console.log(data.data);
      });

FILTER API:
  fetch('/api/borrowing-history.php?status=borrowed')
      .then(r => r.json())
      .then(data => console.log(data));

EXPORT CSV:
  window.location.href = '/api/borrowing-history.php?format=csv';


ğŸ” SECURITY QUICK CHECKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Authentication
  â€¢ requireAuth() check present
  â€¢ Session validation required
  â€¢ Non-logged users redirected

âœ“ SQL Security
  â€¢ Prepared statements used
  â€¢ Parameter binding on all queries
  â€¢ No string concatenation with SQL

âœ“ XSS Prevention
  â€¢ htmlspecialchars() on output
  â€¢ No raw HTML from variables

âœ“ Data Isolation
  â€¢ WHERE member_id = $_SESSION['user']['id']
  â€¢ Users can't see others' data

âœ“ Error Handling
  â€¢ Try-catch blocks
  â€¢ Safe error messages
  â€¢ No debug info exposed


ğŸ§ª TESTING QUICK COMMANDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHP TEST:
  cd /path/to/perpustakaan-online
  php test-borrowing-history.php

SECURITY AUDIT:
  php security-audit.php

MANUAL TEST:
  1. Open browser
  2. Go to: http://localhost/perpustakaan-online/public/login.php
  3. Login as student
  4. Visit: http://localhost/perpustakaan-online/public/student-borrowing-history.php
  5. Check data displays


ğŸ“Š COMMON SQL QUERIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GET ALL BORROWS FOR MEMBER:
  SELECT b.*, bk.title, bk.author, bk.cover_image
  FROM borrows b
  LEFT JOIN books bk ON b.book_id = bk.id
  WHERE b.member_id = 3
  ORDER BY b.borrowed_at DESC;

GET CURRENTLY BORROWED:
  SELECT * FROM borrows
  WHERE member_id = 3 AND status = 'borrowed';

COUNT BY STATUS:
  SELECT status, COUNT(*) as count
  FROM borrows
  WHERE member_id = 3
  GROUP BY status;

GET OVERDUE BOOKS:
  SELECT * FROM borrows
  WHERE member_id = 3 AND due_at < NOW() AND returned_at IS NULL;

CALCULATE FINE:
  SELECT SUM(DATEDIFF(NOW(), due_at) * 5000) as total_fine
  FROM borrows
  WHERE member_id = 3 AND returned_at IS NULL AND due_at < NOW();

UPDATE STATUS TO OVERDUE:
  UPDATE borrows
  SET status = 'overdue'
  WHERE status = 'borrowed' AND due_at < NOW() AND returned_at IS NULL;

RETURN A BOOK:
  UPDATE borrows
  SET returned_at = NOW(), status = 'returned'
  WHERE id = 11;


âš ï¸ COMMON ISSUES & SOLUTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ISSUE: Page shows "Akses Ditolak"
SOLUTION:
  1. Logout
  2. Clear browser cookies
  3. Login again
  4. Visit page again

ISSUE: "DB Connection failed"
SOLUTION:
  1. Check MySQL running (XAMPP Control Panel)
  2. Verify src/config.php credentials
  3. Restart Apache & MySQL
  4. Test connection in phpMyAdmin

ISSUE: "Belum Ada Riwayat Peminjaman"
SOLUTION:
  1. Insert sample data (see QUICK START)
  2. Or manually insert in phpMyAdmin
  3. Refresh page

ISSUE: Cover image not showing
SOLUTION:
  1. Create img/covers/ folder if missing
  2. Upload image file to folder
  3. Check filename matches in database
  4. Verify file permissions

ISSUE: API returns 401
SOLUTION:
  1. Must login first
  2. Must use same browser
  3. Cannot use Postman (session issue)
  4. Check session cookie in browser


ğŸ“ HELP & SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Documentation:
  â€¢ BORROWING_HISTORY_README.md (quick start)
  â€¢ BORROWING_HISTORY_GUIDE.md (full guide)
  â€¢ Code comments (inline documentation)

Test Scripts:
  â€¢ test-borrowing-history.php
  â€¢ security-audit.php

Debugging:
  1. Check browser console (F12)
  2. Check PHP error log
  3. Check MySQL error log
  4. Run security audit

Getting Help:
  1. Read documentation
  2. Run test scripts
  3. Check error logs
  4. Review code comments


ğŸ“ˆ NEXT STEPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMMEDIATE (Day 1):
  âœ“ Insert sample data
  âœ“ Test module works
  âœ“ Run security check

SHORT TERM (Week 1):
  âœ“ Integrate with dashboard
  âœ“ Train team
  âœ“ Deploy to production
  âœ“ Monitor logs

MEDIUM TERM (Month 1):
  âœ“ Monitor usage
  âœ“ Collect feedback
  âœ“ Optimize if needed
  âœ“ Plan improvements

LONG TERM (Quarter):
  âœ“ Add PDF export
  âœ“ Add email reminders
  âœ“ Fine payment system
  âœ“ Mobile app integration


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUMMARY:
  âœ“ Complete system ready to use
  âœ“ Well documented
  âœ“ Thoroughly tested
  âœ“ Production ready
  âœ“ Easy to customize

GET STARTED:
  1. Follow "QUICK START" above
  2. Read BORROWING_HISTORY_README.md
  3. Deploy to production

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Version 1.0.0 | January 20, 2026 | Status: âœ… PRODUCTION READY
